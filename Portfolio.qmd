---
title: "Portfolio Balancing"
format: html
editor: visual
---

## Quarto

Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <https://quarto.org>.

## Running Code

When you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this:

```{r}

library(rvest)

url.id <- c('XOM', 'CVX', "BP")
caps <- list()

for (i in url.id) {
  url <- paste0("https://www.marketcaphistory.com/?symbol=", i)
  html <- rvest::read_html(url)
  df <- html %>% rvest::html_elements(css = "table") %>% 
    .[[1]] %>% rvest::html_table() %>% 
    slice_tail(n = -3) %>% 
    select(X1, X2) %>% 
    rename('date' = X1, 'mktcap' = X2) %>% 
    mutate(
      date = as.Date(date, format = '%m/%d/%Y'),
      mktcap = gsub("\\.", "", mktcap),
      mktcap = gsub("B", "", mktcap)
    )
  caps[[i]] <- df
}


```




